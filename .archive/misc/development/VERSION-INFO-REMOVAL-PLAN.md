---
doc_id: 303
---

# 기존 파일 버전 정보 제거 계획

## 현재 상황

- 중앙 버전 트리(`.claude/version-tree.yaml`) 구축 완료
- 각 파일에 여전히 중복된 버전 정보 존재
- 약 50개 이상의 .md 파일 중 많은 수가 트리에 누락

## 제거가 필요한 이유

1. **중복 제거**: 같은 정보를 두 곳에서 관리할 필요 없음
2. **토큰 절약**: 파일당 10-20줄 절약 (90% 감소)
3. **일관성**: 한 곳에서만 관리하여 불일치 방지
4. **유지보수**: 업데이트가 훨씬 간단해짐

## 3단계 마이그레이션 계획

### Stage 1: 준비 단계 (현재~1주)
```yaml
---
doc_id: 999  # 새로 추가 (예시)
version:     # 기존 유지
  created: "2025-08-02"
  updated: "2025-08-02"
  commit: "abc123"
---
```
- 모든 파일에 doc_id 추가
- 버전 트리 완성
- 팀 공지

### Stage 2: 전환 단계 (1주~1개월)
```yaml
---
doc_id: 999  # 예시
# version: deprecated - see .claude/version-tree.yaml
---
```
- 버전 정보 주석 처리
- 트리를 유일한 진실의 원천으로
- 도구 및 스크립트 업데이트

### Stage 3: 완료 단계 (1개월 후)
```yaml
---
doc_id: 999  # 예시
---
```
- 모든 버전 정보 제거
- 최소한의 메타데이터만 유지
- 완전한 토큰 최적화 달성

## 실행 스크립트

### 1. doc_id 추가 스크립트
```bash
# add-doc-ids.sh
for file in $(find . -name "*.md"); do
  # 트리에서 ID 찾기
  # 파일에 doc_id 추가
done
```

### 2. 버전 정보 주석 처리
```bash
# comment-versions.sh
sed -i 's/^version:$/# version: deprecated/g' *.md
```

### 3. 완전 제거
```bash
# remove-versions.sh
# YAML front matter에서 version 섹션 제거
```

## 주의사항

1. **백업 필수**: 각 단계 전 전체 백업
2. **점진적 적용**: 한 번에 모든 파일 변경 금지
3. **검증**: 각 단계 후 시스템 정상 작동 확인
4. **롤백 계획**: 문제 발생 시 즉시 이전 상태로

## 예상 효과

- 50개 파일 × 15줄 = 750줄 제거
- 약 2,000 토큰 절약
- 업데이트 시간 90% 단축
- 버전 불일치 문제 완전 해결

## 다음 단계

1. 먼저 모든 파일을 버전 트리에 추가
2. doc_id 할당 및 파일에 기록
3. Stage 1부터 순차적으로 진행